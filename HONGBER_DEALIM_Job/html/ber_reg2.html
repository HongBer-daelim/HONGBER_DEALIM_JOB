<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="/css/reset.css">
	<link rel="stylesheet" href="/css/ber_reg2.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js">
	</script>
	<script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.2.js" charset="utf-8">
	</script>
	<script src="https://developers.kakao.com/sdk/js/kakao.js">
	</script>
</head>

<body>
	<div class="header">
		<div class="logo"></div>
		<div class="nav_wrap">
			<a href="">
				<nav>MY PAGE</nav>
			</a>
			<a href="">
				<nav>서비스 소개</nav>
			</a>
			<a href="">
				<nav>광고 매칭</nav>
			</a>
			<a href="">
				<nav>광고 뿌리기</nav>
			</a>
			<a href="">
				<nav>광고 줍기</nav>
			</a>
		</div>
	</div>
	<div class="info_wrap">
		<form action="/php/add_hser.php" method="POST">
			<input type="id" name="id" placeholder="아이디"><br>
			<hr>
			<input type="password" name="pwd" placeholder="비밀번호"><br>
			<hr>
			<input type="name" name="name" placeholder="이름"><br>
			<hr>
			<input type="tel" name="phone" placeholder="your phone number"><br>
			<hr>
			<input type="email" name="email" placeholder="E-mail"><br>
			<hr>
			<textarea cols="50" rows="20" placeholder="홍보하고 싶은 제품과 광고주 본인을 자신있게 어필해주세요! 홍보 정보를 담은 파일도 같이 담아주세요!"
				name="msg"></textarea><br>
			<hr>
			<input type="submit" value="가입" class="submit"><br>
		</form>
	</div>
	<br>
	<!-- 네이버아이디로로그인 버튼 노출 영역 -->
	<div id="naverIdLogin"></div>
	<!-- //네이버아이디로로그인 버튼 노출 영역 -->

	<!-- 네이버아디디로로그인 초기화 Script -->
	<script type="text/javascript">
		var naverLogin = new naver.LoginWithNaverId(
			{
				clientId: "DRFaCS0hy5tsmm8uWjSH",
				callbackUrl: "http://localhost/html/naver_hcallback.html",
				isPopup: false,
				loginButton: { color: "green", type: 3, height: 50 }
			}
		);
		/* 설정정보를 초기화하고 연동을 준비 */
		naverLogin.init();
	</script>
	<!-- // 네이버아이디로로그인 초기화 Script -->
	<br>
	<!-- 카카오아이디로로그인 버튼 노출 영역 -->
	<div id="KakaoIdLogin">
		<button id="kakaoLogout" onclick="kakaoLogout()">kakaoLogout</button>
		<a href="javascript:KakaoLogin()">
			<img id="Kakaoimg"
				src="https://developers.kakao.com/tool/resource/static/img/button/login/full/ko/kakao_login_medium_narrow.png"></a>
		<script>
			Kakao.init("846c86955331163913db5509dc81efdb");

			function KakaoLogin() {
				Kakao.Auth.login({
					success: function (res) {
						Kakao.API.request({
							url: '/v2/user/me',
							success: function (res) {
								var kid = res.id;
								var kemail = res.kakao_account.email;
								var knikname = res.kakao_account.profile.nickname;
								var kpimg = res.properties.profile_image;
								var ktpimg = res.properties.thumbnail_image;
								var ktk = Kakao.Auth.getAccessToken();

								$.ajax({
									type: "POST",
									url: "/php/add_hk.php",
									dataType: "text",
									data: { "id": kid, "name": knikname, "email": kemail, "pimg": kpimg, "tpimg": ktpimg, "token": ktk },
									error: function (data) { console.log(data); },
									success: function (res) { console.log(res) }
								});
								window.location.replace("/php/add_hk.php")
							},
							fail: function (error) {
								console.log(error);
							},
						})
					},
					fail: function (error) {
						console.log(error);
					},
				})
			}

			function kakaoLogout() {
				if (Kakao.Auth.getAccessToken()) {
					Kakao.API.request({
						url: '/v1/user/unlink',
						success: function (res) {
							alert('로그아웃 되었습니다.');
						},
						fail: function (error) {
							console.log(error)
						},
					})
					Kakao.Auth.setAccessToken(null);
				} else {
					alert('이미 로그아웃 되어있습니다.');
				}
			}
		</script>
	</div>
	<!-- 카카오아이디로로그인 버튼 노출 영역 -->
</body>

</html>